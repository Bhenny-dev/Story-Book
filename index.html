<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Moon Valley Flipbook</title>
<style>
body {
    position: relative;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    overflow:hidden;
    font-family:'Georgia',serif;
    transition:background-image 0.6s;
    background: #1a0d0d;
    background-size:cover;
    background-position:center;
}
#flame-bg-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100vw; height: 100vh;
    z-index: 0;
    pointer-events: none;
    display: block;
}
.book {
    position:relative;
    width:700px; height:500px;
    perspective:2000px;
    z-index: 1;
}
.page {
    position:absolute;
    width:100%; height:100%;
    color:#1b1b1b;
    padding:40px;
    box-sizing:border-box;
    box-shadow:0 0 20px rgba(158, 0, 0, 0.3);
    transform-origin:left;
    transition:transform 1s;
    backface-visibility:hidden;
    line-height:1.6em;
    z-index:5;
}
.page::before {
    content:'';
    position:absolute;
    top:0; left:0; right:0; bottom:0;
    background:rgba(255,255,255,0.75);
    opacity: 80%;
    z-index:-1;
}
.page.no-overlay::before { display: none; }
.page h1.title { text-align:center; font-size:2.5em; margin-top:100px; color:#c0392b; }
.page h2 {margin-top:0;}
.page.flipped { transform:rotateY(-180deg); z-index:1; }
.highlight { color:#c0392b; font-weight:bold; }
.controls {
    position:absolute;
    bottom:20px;
    left:50%;
    transform:translateX(-50%);
    z-index:10;
}
button {
    background-color:maroon; color:#fff;
    border:none; padding:10px 20px;
    margin:0 10px; border-radius:6px;
    cursor:pointer; font-size:1em;
}
button:hover { background:red; }
.end-page {
    text-align:center;
    font-size:2em;
    font-weight:bold;
    color:red;
}
</style>
</head>
<body>
<canvas id="flame-bg-canvas"></canvas>
<div class="book" id="book">
    <!-- Cover -->
    <div class="page no-overlay" style="opacity:100%; z-index:7; background:url('cover-valley.jpg') center/cover no-repeat;" data-page="0"></div>

    <!-- Chapter 1 -->
    <div class="page" style="z-index:6; background:url('valley1.png') center/cover no-repeat;" data-page="1">
        <h2>Chapter 1</h2>
        <p>
            <span class='highlight'>Ember</span> soared above the SMOKING peaks at dawn, her crimson scales glinting as the first<br>
            sunbeams pierced the clouds. Her heart thundered with both fear and wonder, for tonight<br>
            marked the first full moon of the ancient prophecy.
            <p><em>Teaser:</em> <span class='highlight'>Ember</span> soared above the SMOKING peaks at dawn, her crimson scales glinting as the first sunbeam...</p>
            <p>Ember's name has 5 letters.</p>
            <p>Secret Moon Valley code (reversed): yellaVnooM</p>
        </p>
    </div>

    <!-- Chapter 2 -->
    <div class="page" style="z-index:5; background:url('valley2.png') center/cover no-repeat;" data-page="2">
        <h2>Chapter 2</h2>
        <p>
            Beside her glided Pyra (once called Pyxis), a clever sapphire dragon whose golden eyes<br>
            gleamed with secrets older than the mountain caves. They followed a trail of faintly glowing<br>
            crystals, each wingbeat echoing a soft hum of forgotten songs.
        </p>
    </div>

    <!-- Chapter 3 -->
    <div class="page" style="z-index:4; background:url('valley3.png') center/cover no-repeat;" data-page="3">
        <h2>Chapter 3</h2>
        <p>
            The mountain itself seemed alive. Elder Stone, veins deep as memory, spoke in riddles carried<br>
            on the wind: 'Seek the valley where moon and shadow meet.' <br>
            Ember listened, the words etching themselves into her mind like shimmering runes.
        </p>
    </div>

    <!-- Chapter 4 -->
    <div class="page" style="z-index:3; background:url('valley4.png') center/cover no-repeat;" data-page="4">
        <h2>Chapter 4</h2>
        <p>
            From the darkest cavern emerged SHADOW the ancient wyrm, his scales streaked with starlight.<br>
            A thunderous roar rolled across the cliffs, shaking the stones. Yet within his eyes burned an old<br>
            sorrow. Ember raised her talon, whispering a promise of peace as Pyra bristled beside her. ROAR! ROAR!
        </p>
    </div>

    <!-- Chapter 5 -->
    <div class="page" style="z-index:2; background:url('valley5.png') center/cover no-repeat;" data-page="5">
        <h2>Chapter 5</h2>
        <p>
            The moonlit valley shimmered awake as Luma, spirit of flame, rose from its heart. Gentle winds<br>
            reflected galaxies, and the prophecy unfolded: Ember’s courage had united friend and guardian<br>
            alike, weaving their fates into a new legend that would be sung for generations.
            <p>and so a legend began, whispered by stars and carried on every dawn breeze.</p>
        </p>
    </div>

    <!-- End Page -->
    <div class="page no-overlay" style="z-index:1; background:url('end-valley.jpg') center/cover no-repeat; display:flex; align-items:center; justify-content:center;" data-page="6">
        <h1 style="text-align:center; width:100%; color:white;">✨ The End ✨</h1>
    </div>

    <div class="controls">
        <button id="prev">⬅ Previous</button>
        <button id="next">Next ➡</button>
    </div>
</div>

<script>
// --- Magma Background ---
const canvas = document.getElementById('flame-bg-canvas');
const ctx = canvas.getContext('2d');
let w = window.innerWidth, h = window.innerHeight;
canvas.width = w; canvas.height = h;
window.addEventListener('resize', ()=>{ w=window.innerWidth; h=window.innerHeight; canvas.width=w; canvas.height=h; });

const magmaParticles=[]; const MAGMA_COLORS=['#ff4500','#ff8c00','#ffd700','#b22222','#ff6347'];
function rand(a,b){ return a+Math.random()*(b-a); }
function spawnMagma(){ magmaParticles.push({x:rand(0,w), y:h-rand(10,120), vx:rand(-0.3,0.3), vy:-rand(0.5,1.5), size:rand(30,90), life:rand(60,140), color:MAGMA_COLORS[Math.floor(Math.random()*MAGMA_COLORS.length)]}); }
function drawMagma(p){ let g=ctx.createRadialGradient(p.x,p.y,0,p.x,p.y,p.size); g.addColorStop(0,p.color); g.addColorStop(0.5,'rgba(255,80,0,0.5)'); g.addColorStop(1,'rgba(255,0,0,0)'); ctx.globalAlpha=0.7; ctx.beginPath(); ctx.arc(p.x,p.y,p.size,0,2*Math.PI); ctx.fillStyle=g; ctx.fill(); ctx.globalAlpha=1; }
function animateMagma(){ ctx.clearRect(0,0,w,h); if(magmaParticles.length<40) spawnMagma(); for(let i=magmaParticles.length-1;i>=0;i--){let p=magmaParticles[i]; drawMagma(p); p.x+=p.vx;p.y+=p.vy;p.life--; if(p.life<=0) magmaParticles.splice(i,1);} requestAnimationFrame(animateMagma); }
animateMagma();

// --- Page Flip ---
const pages=document.querySelectorAll('.page'); let current=0;
const nextBtn=document.getElementById('next'); const prevBtn=document.getElementById('prev'); const controls=document.querySelector('.controls');
function showPage(n){ pages.forEach((p,i)=>{ if(i<n){p.classList.add('flipped');} else {p.classList.remove('flipped');}}); if(current===0){controls.style.display='none'; pages[0].style.cursor='pointer';} else {controls.style.display=''; pages[0].style.cursor='';} if(current===pages.length-1){nextBtn.style.display='none';} else {nextBtn.style.display='';}}
showPage(current);
pages[0].onclick=()=>{ if(current===0){current=1; showPage(current);} };
nextBtn.onclick=()=>{ if(current<pages.length-1){current++; showPage(current);} };
prevBtn.onclick=()=>{ if(current>0){current--; showPage(current);} };
</script>
</body>
</html>
